<!doctype html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="/static/normalize.css">
	<link rel="stylesheet" href="/static/highlight.css">
	<link rel="stylesheet" href="/static/styles.css">
	<title></title>
    </head>
    <body>
	<div id="background">
	    <video autoplay loop poster="/static/video/poster.jpeg">
		<source src="/static/video/space.ogv" type="video/ogg"/>
		<source src="/static/video/space.mp4" type="video/mp4"/>
		<source src="/static/video/space.webm" type="video/webm"/>
	    </video>
	</div>
	<div id="overlay">
	</div>
	<div id="root">
	    <h1><a href="https://hyperdev.fr">hyperdev.fr</a></h1>
	    <div><h1>2019/01/01 - What does a web application architecture include?</h1>
<p>And what are the code patterns?</p>
<p>In this note, I will describe and introduce concepts related to web
developpement from the big picture to code patterns.</p>
<p>This article links to RFCs and man pages, it's a reminder for me to
read them one day.</p>
<h2>Big pictures</h2>
<p>At the very beginning you type an Uniform Resource Locator
aka. URL <a href="https://www.ietf.org/rfc/rfc1738.txt">RFC 1738</a> in the
location bar. Something like <code>http://hyperdev.fr/</code>.</p>
<p>The browser will request the Internet Protocol address
aka. IP <a href="https://tools.ietf.org/html/rfc791">RFC 791</a> of the URL using
a Domain Name Service <a href="https://www.ietf.org/rfc/rfc1035.txt">RFC 1035</a>
prolly configured
in <a href="https://linux.die.net/man/5/resolv.conf"><code>/etc/resolv.conf</code></a>.</p>
<p>You query the DNS service using the <a href="https://linux.die.net/man/1/dig"><code>dig</code></a> command:</p>

<div><pre>amirouche@ubudec:~$ dig hyperdev.fr

; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; hyperdev.fr
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2891
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;hyperdev.fr.           IN  A

;; ANSWER SECTION:
hyperdev.fr.        2952    IN  A   92.222.88.65

;; Query time: 0 msec
;; SERVER: 127.0.0.53#53(127.0.0.53)
;; WHEN: Mon Nov 06 20:24:48 CET 2017
;; MSG SIZE  rcvd: 56</pre></div>
<p>You decypher this without knowing DNS or whatever. There is only
one IP in the output.</p>
<p>At this point, the browser with the IP and the URL will construct a
HyperText Transfer Protocol
aka. HTTP/1.1 <a href="https://tools.ietf.org/html/rfc2616">RFC 2616</a>. This
HTTP packet is a <em>request</em> for the page you want.</p>
<p>You can simulate what the browser does at this point with
the <a href="https://linux.die.net/man/1/nc"><code>nc</code></a> command. For instance:</p>

<div><pre>amirouche@ubudec:~$ nc 92.222.88.65 80</pre></div>
<p>Then paste the following in the console:</p>

<div><pre>GET / HTTP/1.1
Host: hyperdev.fr</pre></div>
<p>Mind the last blank line.</p>
<p>The output will start with something like that:</p>

<div><pre>HTTP/1.1 200 OK
Server: nginx/1.10.3
Date: Mon, 06 Nov 2017 19:27:02 GMT
Content-Type: text/html
Content-Length: 3875
Last-Modified: Sat, 19 Aug 2017 13:31:40 GMT
Connection: keep-alive
ETag: "59983dbc-f23"
Accept-Ranges: bytes

&lt;html&gt;&lt;head&gt;&lt;meta charset="utf-8" /&gt;&lt;title&gt;hyperdev.fr&lt;/title&gt;&lt;link rel="stylesheet" href="/static/css/normalize.css" /&gt;&lt;link rel="stylesheet" href="/static/css/app.css" /&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;
...</pre></div>
<p>And even more HTML code. This is the server response.</p>
<p>At his point the browser will parse the response and prolly request
more files from the server and trigger at the same time the rendering
of the page [TODO: link how a browser render a page].</p>
<p>But a question remains, who answered the HTTP request? Well the answer
is: it depends. It depends whether there is cache or some other kind
of proxy between the browser and the server.</p>
<p>Also, nowdays HTTP requests happens most of the time over a secure
layer sometime called SSL but it's more likely using Transport Layer
Security protocol
aka. TLS <a href="https://www.ietf.org/rfc/rfc2246.txt">RFC 2246</a>.</p>
<p>Thanks to <a href="https://letsencrypt.org/">Let's Encrypt</a> everybody can use
TLS for free.</p>
<p>To keep things simple we will imagine that there is no proxy and you
directly access the application server.</p>
</div>
	</div>
    </body>
</html>